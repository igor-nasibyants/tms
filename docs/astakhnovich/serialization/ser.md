# СЕРИАЛИЗАЦИЯ

---

- Сериализация (Serialization) - процесс преобразования структуры данных в линейную последовательность байтов
для дальнейшей
передачи или сохранения. Сериализованные объекты можно затем восстановить (десериализовать).

- Существует два способа сериализации: 1) интерфейс Serializable 2) интерфейс Externalizable

1. работает через Reflection API - класс разбирается как набор полей, каждое из которых пишется в выходной поток. Эта
   операция неоптимальна по производительности. 
   1. запись в поток метаданных о классе, ассоциированном с объектом (имя класса, идентификатор SerialVersionUID,
         идентификаторы полей класса); 
   2. рекурсивную запись в поток описания суперклассов до класса java.lang.Object (не включительно); 
   3. запись примитивных значений полей сериализуемого экземпляра, начиная с полей самого верхнего суперкласса; 
   4. рекурсивную запись объектов, которые являются полями сериализуемого объекта.
   
- ранее сериализованные объекты повторно не сериализуются, что позволяет алгоритму корректно работать с циклическими
  ссылками.
- Для выполнения десериализации под объект выделяется память, после чего его поля заполняются значениями из потока.
  Конструктор объекта при этом не вызывается. Однако при десериализации будет вызван конструктор без параметров
  родительского несериализуемого класса, а его отсутствие повлечёт ошибку десериализации.
- Поля класса, помеченные модификатором transient, не сериализуются.
- При стандартной сериализации поля, имеющие модификатор static, не сериализуются.
- Поля с модификатором final сериализуются как и обычные.

2.  если необходимо использовать кастомную сериализацию, тогда используется интерфейс Еxternalizable,  который позволяет
  применение пользовательской логики сериализации. Способ сериализации и десериализации описывается в методах
  writeExternal() и readExternal(). Во время десериализации вызывается конструктор без параметров, а потом уже на
  созданном объекте вызывается метод readExternal

- если у сериализуемого объекта реализован один из следующих методов, то механизм сериализации будет использовать его,
  а не метод по умолчанию :
- **writeObject()** - запись объекта в поток;
- **readObject()** - чтение объекта из потока;
- **writeReplace()** - позволяет заменить себя экземпляром другого класса перед записью;
- **readResolve()** - позволяет заменить на себя другой объект после чтения.

- поля с модификатором final сериализуются как и обычные. За одним исключением – их невозможно десериализовать при
  использовании ***Externalizable***, поскольку final поля должны быть инициализированы в конструкторе, а после этого в
  readExternal() изменить значение этого поля будет невозможно. Соответственно, если необходимо сериализовать объект
  с final полем необходимо использовать только стандартную сериализацию.

- если поле объявлено transient, то при десериализации объекта оно принимает значение по умолчанию.

# ПЕРЕДАЧА ДАННЫХ ПО СЕТИ

---

- Для передачи данных по сети используется сериализация в XML и JSON. Для XML используем JAXB, для JSON - Jackson.

### JAXB

- JAXB – это часть JDK, поэтому скачивать его отдельно не требуется. 
- Сериализация происходит с помощью Marshaller.
- Десериализация с помощью Unmarshaller.
- Поддерживает аннотации.

### Jackson

- Сторонняя библиотека от гугл.
- Гораздо проще, быстрее и удобнее, чем JAXB.
- Данные в json гораздо более читабельные. 
- Поддерживает аннотации.